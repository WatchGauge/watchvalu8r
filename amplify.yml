version: 1
frontend:
  phases:
    preBuild:
      commands:
        - node -v
        - npm -v
        - npm ci || npm install
    build:
      commands:
        - npx next telemetry disable
        - echo "=== RUN: npm run build ==="
        - npm run build
        # ğŸ‘‰ Hard fail if static export didn't create index.html
        - echo "=== VERIFY EXPORT ==="
        - test -f out/index.html || (echo "âŒ No out/index.html created"; ls -la; ls -la out || true; exit 1)
        - echo "âœ… Found out/index.html"
        - echo "=== LIST OUT DIR ==="
        - ls -la out
  artifacts:
    baseDirectory: out
    files:
      - '**/*'
  cache:
    paths:
      - node_modules/**/*
      - ~/.npm/**/*










